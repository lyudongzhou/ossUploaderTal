"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue"),t=require("element-plus"),n=require("ali-oss"),r=require("uuid"),a=require("url");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var i=o(n),l=c(a);function u(e,t,n,r){return new(n||(n=Promise))((function(a,o){function c(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}l((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,a,o,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){c.label=o[1];break}if(6===o[0]&&c.label<a[1]){c.label=a[1],a=o;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(o);break}a[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}var d=e.defineComponent({name:"Plus"});const p={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},f=e.createVNode("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1);d.render=function(t,n,r,a,o,c){return e.openBlock(),e.createBlock("svg",p,[f])},d.__file="packages/components/Plus.vue";var v,h=d;function g(e,t){return u(this,void 0,void 0,(function(){var n,a,o;return s(this,(function(c){switch(c.label){case 0:return[4,t.postJson("/jzx/api/upload/oss/sts/auth")];case 1:if(0!==(n=c.sent().data).errcode)throw new Error(n.errmsg);return[4,new i.default({region:v.BeiJing,accessKeyId:n.data.AccessKeyId,accessKeySecret:n.data.AccessKeySecret,stsToken:n.data.SecurityToken,bucket:n.data.Bucket}).put("".concat(r.v4(),"-").concat(e.file.name),e.file)];case 2:return a=c.sent(),o=l.parse(a.url,!0),[2,n.data.HttpsDomain+o.path]}}))}))}!function(e){e.HangZhou="oss-cn-hangzhou",e.ShangHai="oss-cn-shanghai",e.QingDao="oss-cn-qingdao",e.BeiJing="oss-cn-beijing",e.ShenZhen="oss-cn-shenzhen",e.HongKong="oss-cn-hongkong"}(v||(v={}));var m={class:"cover"},y={class:"select-title"},x=["src"],b=e.defineComponent({props:{sizeLimit:{type:Number,required:!1,default:5242880},sizeLimitText:{type:String,required:!1,default:"仅支持5M以内的图片文件。"},fileTypes:{type:Array,required:!1,default:function(){return["image/jpeg","image/jpg","image/png"]}},title:{type:String,required:!1,default:"封面"},sender:{type:null,required:!0},modelValue:{type:[String,null],required:!0}},emits:["update:modelValue"],setup:function(n,r){var a=r.emit,o=n;function c(e){return u(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return e.file.size>o.sizeLimit?(t.ElMessage.error(o.sizeLimitText),[2]):(c=e.file,o.fileTypes.includes(c.type)?[4,g(e,o.sender)]:(t.ElMessage.error("仅支持"+o.fileTypes.map((function(e){return e.split("/")[1]})).join("、")+"格式的图片文件。"),[2]));case 1:return n=r.sent(),a("update:modelValue",n),[2]}var c}))}))}return function(n,r){return e.openBlock(),e.createElementBlock("div",m,[e.createElementVNode("div",y,e.toDisplayString(o.title),1),e.createVNode(e.unref(t.ElUpload),{class:"avatar-uploader","http-request":c,accept:o.fileTypes.join(","),action:" "},{default:e.withCtx((function(){return[e.createVNode(e.unref(t.ElIcon),{class:"avatar-uploader-icon"},{default:e.withCtx((function(){return[e.createVNode(e.unref(h))]})),_:1})]})),_:1},8,["accept"]),o.modelValue?(e.openBlock(),e.createElementBlock("img",{key:0,class:"image",src:o.modelValue},null,8,x)):e.createCommentVNode("v-if",!0)])}}});!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('.cover[data-v-d5ce1c7e] {\n  display: inline-flex;\n}\n.cover[data-v-d5ce1c7e] [data-v-d5ce1c7e] .el-upload-list {\n  display: none;\n}\n.cover[data-v-d5ce1c7e] .image[data-v-d5ce1c7e] {\n  width: 178px;\n  height: 178px;\n  display: block;\n  margin-left: 10px;\n}\n.cover[data-v-d5ce1c7e] .select-title[data-v-d5ce1c7e] {\n  width: 120px;\n  text-align: right;\n  line-height: 40px;\n  padding: 0 12px 0 0;\n  cursor: default;\n}\n.cover[data-v-d5ce1c7e] .select-title[data-v-d5ce1c7e]:before {\n  content: "*";\n  color: #f56c6c;\n  margin-right: 4px;\n}\n.cover[data-v-d5ce1c7e] [data-v-d5ce1c7e] .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.cover[data-v-d5ce1c7e] [data-v-d5ce1c7e] .el-upload:hover {\n  border-color: #409eff;\n}\n.cover[data-v-d5ce1c7e] [data-v-d5ce1c7e] .el-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  text-align: center;\n  line-height: 178px;\n}\n'),b.__scopeId="data-v-d5ce1c7e",b.__file="src/components/UploadBaodian.vue";var w=[b];exports.UploadBaodian=b,exports.install=function(e){w.forEach((function(t){e.component(t.name,t)}))},exports.upload=g;
//# sourceMappingURL=index.js.map
